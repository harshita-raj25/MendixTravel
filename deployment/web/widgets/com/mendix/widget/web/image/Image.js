define(["exports","react","react-dom"],(function(e,t,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=o(t),i=o(n);var a,c={exports:{}};
/*!
    Copyright (c) 2018 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  */a=c,function(){var e={}.hasOwnProperty;function t(){for(var n=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var i=typeof r;if("string"===i||"number"===i)n.push(r);else if(Array.isArray(r)){if(r.length){var a=t.apply(null,r);a&&n.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var c in r)e.call(r,c)&&r[c]&&n.push(c);else n.push(r.toString())}}return n.join(" ")}a.exports?(t.default=t,a.exports=t):window.classNames=t}();var s=c.exports;function l(e,t){return"pixels"===t?e:"percentage"===t?e+"%":""}function u(e){return e?{onClick:e,role:"button",tabIndex:0,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e(t)}}:{}}const d=function(e){return t.createElement("div",{className:s("mx-image-viewer",{"mx-image-viewer-responsive":e.responsive},e.className,{hidden:!e.hasImage})},e.children)},f=function(e){return t.createElement("div",{className:s("mx-image-viewer","mx-image-background",e.className),onClick:e.onClick,style:{...e.style,height:l(e.height,e.heightUnit),width:l(e.width,e.widthUnit),backgroundImage:"url('".concat(e.image,"')")}},e.children)},m=function(e){const n=e.altText?{"aria-label":e.altText,role:"img"}:{},o=u(e.onClick);return t.createElement("span",{className:s("glyphicon",e.icon),style:{...e.style,fontSize:"".concat(e.size,"px")},...n,...o})},p=function(e){const n=u(e.onClick);return t.createElement("img",{className:e.className,src:e.image,style:{...e.style,height:l(e.height,e.heightUnit),width:l(e.width,e.widthUnit)},alt:e.altText,...n})};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function h(e){return e&&e.ownerDocument||document}function g(e){void 0===e&&(e=h());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(t){return e.body}}function y(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var b=!("undefined"==typeof window||!window.document||!window.document.createElement),w=!1,E=!1;try{var k={get passive(){return w=!0},get once(){return E=w=!0}};b&&(window.addEventListener("test",k,k),window.removeEventListener("test",k,!0))}catch($){}function x(e,t,n,o){return function(e,t,n,o){if(o&&"boolean"!=typeof o&&!E){var r=o.once,i=o.capture,a=n;!E&&r&&(a=n.__once||function e(o){this.removeEventListener(t,e,i),n.call(this,o)},n.__once=a),e.addEventListener(t,a,w?o:i)}e.addEventListener(t,n,o)}(e,t,n,o),function(){!function(e,t,n,o){var r=o&&"boolean"!=typeof o?o.capture:o;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}(e,t,n,o)}}var C={exports:{}},S={},O="function"==typeof Symbol&&Symbol.for,N=O?Symbol.for("react.element"):60103,T=O?Symbol.for("react.portal"):60106,$=O?Symbol.for("react.fragment"):60107,P=O?Symbol.for("react.strict_mode"):60108,R=O?Symbol.for("react.profiler"):60114,L=O?Symbol.for("react.provider"):60109,_=O?Symbol.for("react.context"):60110,I=O?Symbol.for("react.async_mode"):60111,F=O?Symbol.for("react.concurrent_mode"):60111,M=O?Symbol.for("react.forward_ref"):60112,U=O?Symbol.for("react.suspense"):60113,j=O?Symbol.for("react.suspense_list"):60120,D=O?Symbol.for("react.memo"):60115,A=O?Symbol.for("react.lazy"):60116,B=O?Symbol.for("react.block"):60121,z=O?Symbol.for("react.fundamental"):60117,V=O?Symbol.for("react.responder"):60118,H=O?Symbol.for("react.scope"):60119;function W(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case N:switch(e=e.type){case I:case F:case $:case R:case P:case U:return e;default:switch(e=e&&e.$$typeof){case _:case M:case A:case D:case L:return e;default:return t}}case T:return t}}}function K(e){return W(e)===F}S.AsyncMode=I,S.ConcurrentMode=F,S.ContextConsumer=_,S.ContextProvider=L,S.Element=N,S.ForwardRef=M,S.Fragment=$,S.Lazy=A,S.Memo=D,S.Portal=T,S.Profiler=R,S.StrictMode=P,S.Suspense=U,S.isAsyncMode=function(e){return K(e)||W(e)===I},S.isConcurrentMode=K,S.isContextConsumer=function(e){return W(e)===_},S.isContextProvider=function(e){return W(e)===L},S.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===N},S.isForwardRef=function(e){return W(e)===M},S.isFragment=function(e){return W(e)===$},S.isLazy=function(e){return W(e)===A},S.isMemo=function(e){return W(e)===D},S.isPortal=function(e){return W(e)===T},S.isProfiler=function(e){return W(e)===R},S.isStrictMode=function(e){return W(e)===P},S.isSuspense=function(e){return W(e)===U},S.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===$||e===F||e===R||e===P||e===U||e===j||"object"==typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===D||e.$$typeof===L||e.$$typeof===_||e.$$typeof===M||e.$$typeof===z||e.$$typeof===V||e.$$typeof===H||e.$$typeof===B)},S.typeOf=W;function Y(){}function X(){}X.resetWarningCache=Y;C.exports=function(){function e(e,t,n,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:X,resetWarningCache:Y};return n.PropTypes=n,n}();var Z=C.exports;function q(e){var n,o,r=(n=e,(o=t.useRef(n)).current=n,o);t.useEffect((function(){return function(){return r.current()}}),[])}function G(e){var n=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n}(e);return t.useCallback((function(){return n.current&&n.current.apply(n,arguments)}),[n])}function J(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Q(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function ee(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Q(e.className,t):e.setAttribute("class",Q(e.className&&e.className.baseVal||"",t))}function te(e,t){return function(e){var t=h(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var ne=/([A-Z])/g;var oe=/^ms-/;function re(e){return function(e){return e.replace(ne,"-$1").toLowerCase()}(e).replace(oe,"-ms-")}var ie,ae=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function ce(e,t){var n="",o="";if("string"==typeof t)return e.style.getPropertyValue(re(t))||te(e).getPropertyValue(re(t));Object.keys(t).forEach((function(r){var i=t[r];i||0===i?!function(e){return!(!e||!ae.test(e))}(r)?n+=re(r)+": "+i+";":o+=r+"("+i+") ":e.style.removeProperty(re(r))})),o&&(n+="transform: "+o+";"),e.style.cssText+=";"+n}function se(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function le(e){var t;return se(e)||(t=e)&&"body"===t.tagName.toLowerCase()?function(e){var t=se(e)?h():h(e),n=se(e)||t.defaultView;return t.body.clientWidth<n.innerWidth}(e):e.scrollHeight>e.clientHeight}var ue=["template","script","style"],de=function(e,t,n){[].forEach.call(e.children,(function(e){var o,r,i;-1===t.indexOf(e)&&(r=(o=e).nodeType,i=o.tagName,1===r&&-1===ue.indexOf(i.toLowerCase()))&&n(e)}))};function fe(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}var me,pe=function(){function e(e){var t=void 0===e?{}:e,n=t.hideSiblingNodes,o=void 0===n||n,r=t.handleContainerOverflow,i=void 0===r||r;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=o,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=function(e){if((!ie&&0!==ie||e)&&b){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),ie=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ie}()}var t=e.prototype;return t.isContainerOverflowing=function(e){var t=this.data[this.containerIndexFromModal(e)];return t&&t.overflowing},t.containerIndexFromModal=function(e){return t=this.data,n=function(t){return-1!==t.modals.indexOf(e)},o=-1,t.some((function(e,t){return!!n(e,t)&&(o=t,!0)})),o;var t,n,o},t.setContainerStyle=function(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt(ce(t,"paddingRight")||"0",10)+this.scrollbarSize+"px"),ce(t,n)},t.removeContainerStyle=function(e,t){Object.assign(t.style,e.style)},t.add=function(e,t,n){var o=this.modals.indexOf(e),r=this.containers.indexOf(t);if(-1!==o)return o;if(o=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,t){var n=t.dialog,o=t.backdrop;de(e,[n,o],(function(e){return fe(!0,e)}))}(t,e),-1!==r)return this.data[r].modals.push(e),o;var i={modals:[e],classes:n?n.split(/\s+/):[],overflowing:le(t)};return this.handleContainerOverflow&&this.setContainerStyle(i,t),i.classes.forEach(J.bind(null,t)),this.containers.push(t),this.data.push(i),o},t.remove=function(e){var t=this.modals.indexOf(e);if(-1!==t){var n=this.containerIndexFromModal(e),o=this.data[n],r=this.containers[n];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(t,1),0===o.modals.length)o.classes.forEach(ee.bind(null,r)),this.handleContainerOverflow&&this.removeContainerStyle(o,r),this.hideSiblingNodes&&function(e,t){var n=t.dialog,o=t.backdrop;de(e,[n,o],(function(e){return fe(!1,e)}))}(r,e),this.containers.splice(n,1),this.data.splice(n,1);else if(this.hideSiblingNodes){var i=o.modals[o.modals.length-1],a=i.backdrop;fe(!1,i.dialog),fe(!1,a)}}},t.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),ve=function(e){var t;return"undefined"==typeof document?null:null==e?h().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function he(e){var n=e||(me||(me=new pe),me),o=t.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:function(e,t){return n.add(o.current,e,t)},remove:function(){return n.remove(o.current)},isTopModal:function(){return n.isTopModal(o.current)},setDialogRef:t.useCallback((function(e){o.current.dialog=e}),[]),setBackdropRef:t.useCallback((function(e){o.current.backdrop=e}),[])})}var ge=t.forwardRef((function(e,n){var o=e.show,a=void 0!==o&&o,c=e.role,s=void 0===c?"dialog":c,l=e.className,u=e.style,d=e.children,f=e.backdrop,m=void 0===f||f,p=e.keyboard,h=void 0===p||p,w=e.onBackdropClick,E=e.onEscapeKeyDown,k=e.transition,C=e.backdropTransition,S=e.autoFocus,O=void 0===S||S,N=e.enforceFocus,T=void 0===N||N,$=e.restoreFocus,P=void 0===$||$,R=e.restoreFocusOptions,L=e.renderDialog,_=e.renderBackdrop,I=void 0===_?function(e){return r.default.createElement("div",e)}:_,F=e.manager,M=e.container,U=e.containerClassName,j=e.onShow,D=e.onHide,A=void 0===D?function(){}:D,B=e.onExit,z=e.onExited,V=e.onExiting,H=e.onEnter,W=e.onEntering,K=e.onEntered,Y=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),X=function(e,n){var o=t.useState((function(){return ve(e)})),r=o[0],i=o[1];if(!r){var a=ve(e);a&&i(a)}return t.useEffect((function(){n&&r&&n(r)}),[n,r]),t.useEffect((function(){var t=ve(e);t!==r&&i(t)}),[e,r]),r}(M),Z=he(F),J=function(){var e=t.useRef(!0),n=t.useRef((function(){return e.current}));return t.useEffect((function(){return function(){e.current=!1}}),[]),n.current}(),Q=function(e){var n=t.useRef(null);return t.useEffect((function(){n.current=e})),n.current}(a),ee=t.useState(!a),te=ee[0],ne=ee[1],oe=t.useRef(null);t.useImperativeHandle(n,(function(){return Z}),[Z]),b&&!Q&&a&&(oe.current=g()),k||a||te?a&&te&&ne(!1):ne(!0);var re=G((function(){if(Z.add(X,U),ue.current=x(document,"keydown",se),le.current=x(document,"focus",(function(){return setTimeout(ae)}),!0),j&&j(),O){var e=g(document);Z.dialog&&e&&!y(Z.dialog,e)&&(oe.current=e,Z.dialog.focus())}})),ie=G((function(){var e;(Z.remove(),null==ue.current||ue.current(),null==le.current||le.current(),P)&&(null==(e=oe.current)||null==e.focus||e.focus(R),oe.current=null)}));t.useEffect((function(){a&&X&&re()}),[a,X,re]),t.useEffect((function(){te&&ie()}),[te,ie]),q((function(){ie()}));var ae=G((function(){if(T&&J()&&Z.isTopModal()){var e=g();Z.dialog&&e&&!y(Z.dialog,e)&&Z.dialog.focus()}})),ce=G((function(e){e.target===e.currentTarget&&(null==w||w(e),!0===m&&A())})),se=G((function(e){h&&27===e.keyCode&&Z.isTopModal()&&(null==E||E(e),e.defaultPrevented||A())})),le=t.useRef(),ue=t.useRef(),de=k;if(!X||!(a||de&&!te))return null;var fe=v({role:s,ref:Z.setDialogRef,"aria-modal":"dialog"===s||void 0},Y,{style:u,className:l,tabIndex:-1}),me=L?L(fe):r.default.createElement("div",fe,r.default.cloneElement(d,{role:"document"}));de&&(me=r.default.createElement(de,{appear:!0,unmountOnExit:!0,in:!!a,onExit:B,onExiting:V,onExited:function(){ne(!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null==z||z.apply(void 0,t)},onEnter:H,onEntering:W,onEntered:K},me));var pe=null;if(m){var ge=C;pe=I({ref:Z.setBackdropRef,onClick:ce}),ge&&(pe=r.default.createElement(ge,{appear:!0,in:!!a},pe))}return r.default.createElement(r.default.Fragment,null,i.default.createPortal(r.default.createElement(r.default.Fragment,null,pe,me),X))})),ye={show:Z.bool,container:Z.any,onShow:Z.func,onHide:Z.func,backdrop:Z.oneOfType([Z.bool,Z.oneOf(["static"])]),renderDialog:Z.func,renderBackdrop:Z.func,onEscapeKeyDown:Z.func,onBackdropClick:Z.func,containerClassName:Z.string,keyboard:Z.bool,transition:Z.elementType,backdropTransition:Z.elementType,autoFocus:Z.bool,enforceFocus:Z.bool,restoreFocus:Z.bool,restoreFocusOptions:Z.shape({preventScroll:Z.bool}),onEnter:Z.func,onEntering:Z.func,onEntered:Z.func,onExit:Z.func,onExiting:Z.func,onExited:Z.func,manager:Z.instanceOf(pe)};ge.displayName="Modal",ge.propTypes=ye;var be=Object.assign(ge,{Manager:pe});function we(e){let{onClose:n,...o}=e;return t.createElement("div",{className:"mx-image-viewer-lightbox-backdrop",...o},t.createElement("button",{className:s("btn btn-image btn-icon close-button"),onClick:n},t.createElement("img",{src:"widgets/com/mendix/widget/web/image/assets/c021d926c33ac67c.svg",className:"removeIcon",alt:"Close icon for the full screen image lightbox"})))}function Ee(e){let{isOpen:n,onClose:o,children:r}=e;const i=t.useCallback((e=>t.createElement(we,{onClose:o,...e})),[o]),a=t.useCallback((e=>{e.stopPropagation()}),[]);return t.createElement(be,{show:n,onHide:o,renderBackdrop:i,onBackdropClick:a,className:"mx-image-viewer-lightbox"},t.createElement("div",null,r))}function ke(e,t){if(!e||"fullImage"===t)return e;const n=new URL(e);return n.searchParams.append("thumb","true"),n.href}const xe=e=>{let{class:n,style:o,widthUnit:r,width:i,heightUnit:a,height:c,iconSize:l,responsive:u,onClickType:v,onClick:h,type:g,image:y,altText:b,displayAs:w,previewMode:E,renderAsBackground:k,backgroundImageContent:x}=e;const{lightboxIsOpen:C,openLightbox:S,closeLightbox:O}=(()=>{const[e,n]=t.useState(!1);return{lightboxIsOpen:e,openLightbox:t.useCallback((()=>{n(!0)}),[]),closeLightbox:t.useCallback((()=>{n(!1)}),[])}})(),N=t.useCallback((e=>{null==e||e.stopPropagation(),O()}),[O]),T=t.useCallback((e=>{e.stopPropagation(),"action"===v?null==h||h():"enlarge"===v&&S()}),[h,v,S]),$={style:o,onClick:"action"===v&&h||"enlarge"===v?T:void 0,altText:b},P="image"===g?t.createElement(p,{className:s({"img-thumbnail":"thumbnail"===w}),image:E?y:ke(y,w),height:c,heightUnit:a,width:i,widthUnit:r,...$}):t.createElement(m,{icon:y,size:l,...$});return k?t.createElement(f,{className:n,style:o,image:y,height:c,heightUnit:a,width:i,widthUnit:r,onClick:e=>{e.stopPropagation(),null==h||h()}},x):t.createElement(d,{className:n,responsive:u,hasImage:void 0!==y&&y.length>0},P,!E&&C&&t.createElement(Ee,{isOpen:C,onClose:N},"image"===g?t.cloneElement(P,{image:y,onClick:void 0}):P))};e.Image=e=>{var n;const o=t.useCallback((()=>{var t;return null===(t=e.onClick)||void 0===t?void 0:t.execute()}),[e.onClick]),{type:r,image:i}=function(e){let{datasource:t,imageIcon:n,imageObject:o,imageUrl:r,defaultImageDynamic:i}=e;var a,c;const s={type:"image",image:void 0};switch(t){case"image":return"available"===(null==o?void 0:o.status)?{type:"image",image:o.value.uri}:"unavailable"===(null==o?void 0:o.status)&&"available"===(null==i?void 0:i.status)?{type:"image",image:i.value.uri}:{type:"image",image:void 0};case"imageUrl":return{type:"image",image:"available"===(null==r?void 0:r.status)?r.value:void 0};case"icon":if("available"===(null==n?void 0:n.status)){if("glyph"===(null===(a=n.value)||void 0===a?void 0:a.type))return{type:"icon",image:n.value.iconClass};if("image"===(null===(c=n.value)||void 0===c?void 0:c.type))return{type:"image",image:n.value.iconUrl}}return s;default:return s}}(e),a="available"===(null===(n=e.alternativeText)||void 0===n?void 0:n.status)?e.alternativeText.value:void 0;return t.createElement(xe,{class:e.class,style:e.style,widthUnit:e.widthUnit,width:e.width,heightUnit:e.heightUnit,height:e.height,iconSize:e.iconSize,responsive:e.responsive,onClickType:e.onClickType,onClick:e.onClick?o:void 0,type:r,image:i,altText:a,displayAs:e.displayAs,renderAsBackground:"icon"!==e.datasource&&e.isBackgroundImage,backgroundImageContent:e.children})},Object.defineProperty(e,"__esModule",{value:!0})}));
