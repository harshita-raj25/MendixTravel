import e,{useState as n,useCallback as t,createElement as o,useRef as r,useEffect as i,forwardRef as a,useImperativeHandle as s,cloneElement as c}from"react";import l from"react-dom";var u,d={exports:{}};
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/u=d,function(){var e={}.hasOwnProperty;function n(){for(var t=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)){if(r.length){var a=n.apply(null,r);a&&t.push(a)}}else if("object"===i)if(r.toString===Object.prototype.toString)for(var s in r)e.call(r,s)&&r[s]&&t.push(s);else t.push(r.toString())}}return t.join(" ")}u.exports?(n.default=n,u.exports=n):window.classNames=n}();var f=d.exports;function m(e,n){return"pixels"===n?e:"percentage"===n?e+"%":""}function p(e){return e?{onClick:e,role:"button",tabIndex:0,onKeyDown:n=>{"Enter"!==n.key&&" "!==n.key||e(n)}}:{}}const h=function(e){return o("div",{className:f("mx-image-viewer",{"mx-image-viewer-responsive":e.responsive},e.className,{hidden:!e.hasImage})},e.children)},v=function(e){return o("div",{className:f("mx-image-viewer","mx-image-background",e.className),onClick:e.onClick,style:{...e.style,height:m(e.height,e.heightUnit),width:m(e.width,e.widthUnit),backgroundImage:"url('".concat(e.image,"')")}},e.children)},g=function(e){const n=e.altText?{"aria-label":e.altText,role:"img"}:{},t=p(e.onClick);return o("span",{className:f("glyphicon",e.icon),style:{...e.style,fontSize:"".concat(e.size,"px")},...n,...t})},y=function(e){const n=p(e.onClick);return o("img",{className:e.className,src:e.image,style:{...e.style,height:m(e.height,e.heightUnit),width:m(e.width,e.widthUnit)},alt:e.altText,...n})};function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function w(e){return e&&e.ownerDocument||document}function x(e){void 0===e&&(e=w());try{var n=e.activeElement;return n&&n.nodeName?n:null}catch(n){return e.body}}function k(e,n){return e.contains?e.contains(n):e.compareDocumentPosition?e===n||!!(16&e.compareDocumentPosition(n)):void 0}var C=!("undefined"==typeof window||!window.document||!window.document.createElement),E=!1,S=!1;try{var O={get passive(){return E=!0},get once(){return S=E=!0}};C&&(window.addEventListener("test",O,O),window.removeEventListener("test",O,!0))}catch(F){}function N(e,n,t,o){return function(e,n,t,o){if(o&&"boolean"!=typeof o&&!S){var r=o.once,i=o.capture,a=t;!S&&r&&(a=t.__once||function e(o){this.removeEventListener(n,e,i),t.call(this,o)},t.__once=a),e.addEventListener(n,a,E?o:i)}e.addEventListener(n,t,o)}(e,n,t,o),function(){!function(e,n,t,o){var r=o&&"boolean"!=typeof o?o.capture:o;e.removeEventListener(n,t,r),t.__once&&e.removeEventListener(n,t.__once,r)}(e,n,t,o)}}var T={exports:{}},$={},P="function"==typeof Symbol&&Symbol.for,L=P?Symbol.for("react.element"):60103,_=P?Symbol.for("react.portal"):60106,F=P?Symbol.for("react.fragment"):60107,I=P?Symbol.for("react.strict_mode"):60108,U=P?Symbol.for("react.profiler"):60114,M=P?Symbol.for("react.provider"):60109,D=P?Symbol.for("react.context"):60110,R=P?Symbol.for("react.async_mode"):60111,j=P?Symbol.for("react.concurrent_mode"):60111,A=P?Symbol.for("react.forward_ref"):60112,B=P?Symbol.for("react.suspense"):60113,z=P?Symbol.for("react.suspense_list"):60120,V=P?Symbol.for("react.memo"):60115,H=P?Symbol.for("react.lazy"):60116,W=P?Symbol.for("react.block"):60121,K=P?Symbol.for("react.fundamental"):60117,Y=P?Symbol.for("react.responder"):60118,X=P?Symbol.for("react.scope"):60119;function Z(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case L:switch(e=e.type){case R:case j:case F:case U:case I:case B:return e;default:switch(e=e&&e.$$typeof){case D:case A:case H:case V:case M:return e;default:return n}}case _:return n}}}function q(e){return Z(e)===j}$.AsyncMode=R,$.ConcurrentMode=j,$.ContextConsumer=D,$.ContextProvider=M,$.Element=L,$.ForwardRef=A,$.Fragment=F,$.Lazy=H,$.Memo=V,$.Portal=_,$.Profiler=U,$.StrictMode=I,$.Suspense=B,$.isAsyncMode=function(e){return q(e)||Z(e)===R},$.isConcurrentMode=q,$.isContextConsumer=function(e){return Z(e)===D},$.isContextProvider=function(e){return Z(e)===M},$.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===L},$.isForwardRef=function(e){return Z(e)===A},$.isFragment=function(e){return Z(e)===F},$.isLazy=function(e){return Z(e)===H},$.isMemo=function(e){return Z(e)===V},$.isPortal=function(e){return Z(e)===_},$.isProfiler=function(e){return Z(e)===U},$.isStrictMode=function(e){return Z(e)===I},$.isSuspense=function(e){return Z(e)===B},$.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===F||e===j||e===U||e===I||e===B||e===z||"object"==typeof e&&null!==e&&(e.$$typeof===H||e.$$typeof===V||e.$$typeof===M||e.$$typeof===D||e.$$typeof===A||e.$$typeof===K||e.$$typeof===Y||e.$$typeof===X||e.$$typeof===W)},$.typeOf=Z;function G(){}function J(){}J.resetWarningCache=G;T.exports=function(){function e(e,n,t,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:J,resetWarningCache:G};return t.PropTypes=t,t}();var Q=T.exports;function ee(e){var n,t,o=((t=r(n=e)).current=n,t);i((function(){return function(){return o.current()}}),[])}function ne(e){var n=function(e){var n=r(e);return i((function(){n.current=e}),[e]),n}(e);return t((function(){return n.current&&n.current.apply(n,arguments)}),[n])}function te(e,n){e.classList?e.classList.add(n):function(e,n){return e.classList?!!n&&e.classList.contains(n):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")}(e,n)||("string"==typeof e.className?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function oe(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function re(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=oe(e.className,n):e.setAttribute("class",oe(e.className&&e.className.baseVal||"",n))}function ie(e,n){return function(e){var n=w(e);return n&&n.defaultView||window}(e).getComputedStyle(e,n)}var ae=/([A-Z])/g;var se=/^ms-/;function ce(e){return function(e){return e.replace(ae,"-$1").toLowerCase()}(e).replace(se,"-ms-")}var le,ue=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function de(e,n){var t="",o="";if("string"==typeof n)return e.style.getPropertyValue(ce(n))||ie(e).getPropertyValue(ce(n));Object.keys(n).forEach((function(r){var i=n[r];i||0===i?!function(e){return!(!e||!ue.test(e))}(r)?t+=ce(r)+": "+i+";":o+=r+"("+i+") ":e.style.removeProperty(ce(r))})),o&&(t+="transform: "+o+";"),e.style.cssText+=";"+t}function fe(e){return"window"in e&&e.window===e?e:"nodeType"in(n=e)&&n.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var n}function me(e){var n;return fe(e)||(n=e)&&"body"===n.tagName.toLowerCase()?function(e){var n=fe(e)?w():w(e),t=fe(e)||n.defaultView;return n.body.clientWidth<t.innerWidth}(e):e.scrollHeight>e.clientHeight}var pe=["template","script","style"],he=function(e,n,t){[].forEach.call(e.children,(function(e){var o,r,i;-1===n.indexOf(e)&&(r=(o=e).nodeType,i=o.tagName,1===r&&-1===pe.indexOf(i.toLowerCase()))&&t(e)}))};function ve(e,n){n&&(e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden"))}var ge,ye=function(){function e(e){var n=void 0===e?{}:e,t=n.hideSiblingNodes,o=void 0===t||t,r=n.handleContainerOverflow,i=void 0===r||r;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=o,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=function(e){if((!le&&0!==le||e)&&C){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),le=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return le}()}var n=e.prototype;return n.isContainerOverflowing=function(e){var n=this.data[this.containerIndexFromModal(e)];return n&&n.overflowing},n.containerIndexFromModal=function(e){return n=this.data,t=function(n){return-1!==n.modals.indexOf(e)},o=-1,n.some((function(e,n){return!!t(e,n)&&(o=n,!0)})),o;var n,t,o},n.setContainerStyle=function(e,n){var t={overflow:"hidden"};e.style={overflow:n.style.overflow,paddingRight:n.style.paddingRight},e.overflowing&&(t.paddingRight=parseInt(de(n,"paddingRight")||"0",10)+this.scrollbarSize+"px"),de(n,t)},n.removeContainerStyle=function(e,n){Object.assign(n.style,e.style)},n.add=function(e,n,t){var o=this.modals.indexOf(e),r=this.containers.indexOf(n);if(-1!==o)return o;if(o=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,n){var t=n.dialog,o=n.backdrop;he(e,[t,o],(function(e){return ve(!0,e)}))}(n,e),-1!==r)return this.data[r].modals.push(e),o;var i={modals:[e],classes:t?t.split(/\s+/):[],overflowing:me(n)};return this.handleContainerOverflow&&this.setContainerStyle(i,n),i.classes.forEach(te.bind(null,n)),this.containers.push(n),this.data.push(i),o},n.remove=function(e){var n=this.modals.indexOf(e);if(-1!==n){var t=this.containerIndexFromModal(e),o=this.data[t],r=this.containers[t];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),0===o.modals.length)o.classes.forEach(re.bind(null,r)),this.handleContainerOverflow&&this.removeContainerStyle(o,r),this.hideSiblingNodes&&function(e,n){var t=n.dialog,o=n.backdrop;he(e,[t,o],(function(e){return ve(!1,e)}))}(r,e),this.containers.splice(t,1),this.data.splice(t,1);else if(this.hideSiblingNodes){var i=o.modals[o.modals.length-1],a=i.backdrop;ve(!1,i.dialog),ve(!1,a)}}},n.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),be=function(e){var n;return"undefined"==typeof document?null:null==e?w().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null)};function we(e){var n=e||(ge||(ge=new ye),ge),o=r({dialog:null,backdrop:null});return Object.assign(o.current,{add:function(e,t){return n.add(o.current,e,t)},remove:function(){return n.remove(o.current)},isTopModal:function(){return n.isTopModal(o.current)},setDialogRef:t((function(e){o.current.dialog=e}),[]),setBackdropRef:t((function(e){o.current.backdrop=e}),[])})}var xe=a((function(t,o){var a=t.show,c=void 0!==a&&a,u=t.role,d=void 0===u?"dialog":u,f=t.className,m=t.style,p=t.children,h=t.backdrop,v=void 0===h||h,g=t.keyboard,y=void 0===g||g,w=t.onBackdropClick,E=t.onEscapeKeyDown,S=t.transition,O=t.backdropTransition,T=t.autoFocus,$=void 0===T||T,P=t.enforceFocus,L=void 0===P||P,_=t.restoreFocus,F=void 0===_||_,I=t.restoreFocusOptions,U=t.renderDialog,M=t.renderBackdrop,D=void 0===M?function(n){return e.createElement("div",n)}:M,R=t.manager,j=t.container,A=t.containerClassName,B=t.onShow,z=t.onHide,V=void 0===z?function(){}:z,H=t.onExit,W=t.onExited,K=t.onExiting,Y=t.onEnter,X=t.onEntering,Z=t.onEntered,q=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(t,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),G=function(e,t){var o=n((function(){return be(e)})),r=o[0],a=o[1];if(!r){var s=be(e);s&&a(s)}return i((function(){t&&r&&t(r)}),[t,r]),i((function(){var n=be(e);n!==r&&a(n)}),[e,r]),r}(j),J=we(R),Q=function(){var e=r(!0),n=r((function(){return e.current}));return i((function(){return function(){e.current=!1}}),[]),n.current}(),te=function(e){var n=r(null);return i((function(){n.current=e})),n.current}(c),oe=n(!c),re=oe[0],ie=oe[1],ae=r(null);s(o,(function(){return J}),[J]),C&&!te&&c&&(ae.current=x()),S||c||re?c&&re&&ie(!1):ie(!0);var se=ne((function(){if(J.add(G,A),me.current=N(document,"keydown",de),fe.current=N(document,"focus",(function(){return setTimeout(le)}),!0),B&&B(),$){var e=x(document);J.dialog&&e&&!k(J.dialog,e)&&(ae.current=e,J.dialog.focus())}})),ce=ne((function(){var e;(J.remove(),null==me.current||me.current(),null==fe.current||fe.current(),F)&&(null==(e=ae.current)||null==e.focus||e.focus(I),ae.current=null)}));i((function(){c&&G&&se()}),[c,G,se]),i((function(){re&&ce()}),[re,ce]),ee((function(){ce()}));var le=ne((function(){if(L&&Q()&&J.isTopModal()){var e=x();J.dialog&&e&&!k(J.dialog,e)&&J.dialog.focus()}})),ue=ne((function(e){e.target===e.currentTarget&&(null==w||w(e),!0===v&&V())})),de=ne((function(e){y&&27===e.keyCode&&J.isTopModal()&&(null==E||E(e),e.defaultPrevented||V())})),fe=r(),me=r(),pe=S;if(!G||!(c||pe&&!re))return null;var he=b({role:d,ref:J.setDialogRef,"aria-modal":"dialog"===d||void 0},q,{style:m,className:f,tabIndex:-1}),ve=U?U(he):e.createElement("div",he,e.cloneElement(p,{role:"document"}));pe&&(ve=e.createElement(pe,{appear:!0,unmountOnExit:!0,in:!!c,onExit:H,onExiting:K,onExited:function(){ie(!0);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];null==W||W.apply(void 0,n)},onEnter:Y,onEntering:X,onEntered:Z},ve));var ge=null;if(v){var ye=O;ge=D({ref:J.setBackdropRef,onClick:ue}),ye&&(ge=e.createElement(ye,{appear:!0,in:!!c},ge))}return e.createElement(e.Fragment,null,l.createPortal(e.createElement(e.Fragment,null,ge,ve),G))})),ke={show:Q.bool,container:Q.any,onShow:Q.func,onHide:Q.func,backdrop:Q.oneOfType([Q.bool,Q.oneOf(["static"])]),renderDialog:Q.func,renderBackdrop:Q.func,onEscapeKeyDown:Q.func,onBackdropClick:Q.func,containerClassName:Q.string,keyboard:Q.bool,transition:Q.elementType,backdropTransition:Q.elementType,autoFocus:Q.bool,enforceFocus:Q.bool,restoreFocus:Q.bool,restoreFocusOptions:Q.shape({preventScroll:Q.bool}),onEnter:Q.func,onEntering:Q.func,onEntered:Q.func,onExit:Q.func,onExiting:Q.func,onExited:Q.func,manager:Q.instanceOf(ye)};xe.displayName="Modal",xe.propTypes=ke;var Ce=Object.assign(xe,{Manager:ye});function Ee(e){let{onClose:n,...t}=e;return o("div",{className:"mx-image-viewer-lightbox-backdrop",...t},o("button",{className:f("btn btn-image btn-icon close-button"),onClick:n},o("img",{src:"widgets/com/mendix/widget/web/image/assets/c021d926c33ac67c.svg",className:"removeIcon",alt:"Close icon for the full screen image lightbox"})))}function Se(e){let{isOpen:n,onClose:r,children:i}=e;const a=t((e=>o(Ee,{onClose:r,...e})),[r]),s=t((e=>{e.stopPropagation()}),[]);return o(Ce,{show:n,onHide:r,renderBackdrop:a,onBackdropClick:s,className:"mx-image-viewer-lightbox"},o("div",null,i))}function Oe(e,n){if(!e||"fullImage"===n)return e;const t=new URL(e);return t.searchParams.append("thumb","true"),t.href}const Ne=e=>{let{class:r,style:i,widthUnit:a,width:s,heightUnit:l,height:u,iconSize:d,responsive:m,onClickType:p,onClick:b,type:w,image:x,altText:k,displayAs:C,previewMode:E,renderAsBackground:S,backgroundImageContent:O}=e;const{lightboxIsOpen:N,openLightbox:T,closeLightbox:$}=(()=>{const[e,o]=n(!1);return{lightboxIsOpen:e,openLightbox:t((()=>{o(!0)}),[]),closeLightbox:t((()=>{o(!1)}),[])}})(),P=t((e=>{null==e||e.stopPropagation(),$()}),[$]),L=t((e=>{e.stopPropagation(),"action"===p?null==b||b():"enlarge"===p&&T()}),[b,p,T]),_={style:i,onClick:"action"===p&&b||"enlarge"===p?L:void 0,altText:k},F="image"===w?o(y,{className:f({"img-thumbnail":"thumbnail"===C}),image:E?x:Oe(x,C),height:u,heightUnit:l,width:s,widthUnit:a,..._}):o(g,{icon:x,size:d,..._});return S?o(v,{className:r,style:i,image:x,height:u,heightUnit:l,width:s,widthUnit:a,onClick:e=>{e.stopPropagation(),null==b||b()}},O):o(h,{className:r,responsive:m,hasImage:void 0!==x&&x.length>0},F,!E&&N&&o(Se,{isOpen:N,onClose:P},"image"===w?c(F,{image:x,onClick:void 0}):F))};const Te=e=>{var n;const r=t((()=>{var n;return null===(n=e.onClick)||void 0===n?void 0:n.execute()}),[e.onClick]),{type:i,image:a}=function(e){let{datasource:n,imageIcon:t,imageObject:o,imageUrl:r,defaultImageDynamic:i}=e;var a,s;const c={type:"image",image:void 0};switch(n){case"image":return"available"===(null==o?void 0:o.status)?{type:"image",image:o.value.uri}:"unavailable"===(null==o?void 0:o.status)&&"available"===(null==i?void 0:i.status)?{type:"image",image:i.value.uri}:{type:"image",image:void 0};case"imageUrl":return{type:"image",image:"available"===(null==r?void 0:r.status)?r.value:void 0};case"icon":if("available"===(null==t?void 0:t.status)){if("glyph"===(null===(a=t.value)||void 0===a?void 0:a.type))return{type:"icon",image:t.value.iconClass};if("image"===(null===(s=t.value)||void 0===s?void 0:s.type))return{type:"image",image:t.value.iconUrl}}return c;default:return c}}(e),s="available"===(null===(n=e.alternativeText)||void 0===n?void 0:n.status)?e.alternativeText.value:void 0;return o(Ne,{class:e.class,style:e.style,widthUnit:e.widthUnit,width:e.width,heightUnit:e.heightUnit,height:e.height,iconSize:e.iconSize,responsive:e.responsive,onClickType:e.onClickType,onClick:e.onClick?r:void 0,type:i,image:a,altText:s,displayAs:e.displayAs,renderAsBackground:"icon"!==e.datasource&&e.isBackgroundImage,backgroundImageContent:e.children})};export{Te as Image};
